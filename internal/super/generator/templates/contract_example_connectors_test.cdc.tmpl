import Test
import "FungibleToken"
import "FlowToken"
import "ExampleConnectors"
import "DeFiActions"

access(all) let serviceAccount = Test.serviceAccount()
access(all) let recipient = Test.createAccount()

access(all) fun testTokenSinkDeposit() {
    // Execute transaction to test TokenSink
    // Service account already has FLOW tokens
    let code = Test.readFile("../transactions/DepositViaSink.cdc")
    let tx = Test.Transaction(
        code: code,
        authorizers: [serviceAccount.address],
        signers: [serviceAccount],
        arguments: [recipient.address, 10.0]
    )

    let result = Test.executeTransaction(tx)
    Test.expect(result, Test.beSucceeded())
}

